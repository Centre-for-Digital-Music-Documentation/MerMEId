<!--
  Copyright (C) 2009 Orbeon, Inc.

  This program is free software; you can redistribute it and/or modify it under the terms of the
  GNU Lesser General Public License as published by the Free Software Foundation; either version
  2.1 of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  See the GNU Lesser General Public License for more details.

  The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
  -->
  <Configuration>
  <Appenders>
  <!-- This is the standard log appender to the console (System.out) -->
  <Console name="STDOUT" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{ISO8601} %-5p %c{1} %x - %m%n" charset="UTF-8"/>
      <Filters>
        <LevelRangeFilter minLevel="WARN" onMatch="ACCEPT" onMismatch="DENY"/>
      </Filters>
  </Console>

  <!-- Logging to a single file, typically used in development when you don't want
       to be dealing with multiple files generated by the OrbeonSingleFileAppender. -->
      <!-- File name="OrbeonSingleFileAppender" filename="${logs}/orbeon.log">
      <PatternLayout pattern="%d{ISO8601} %-5p %c{1} %x - %m%n" charset="UTF-8"/>
  </File -->

  <!-- Logging to a rolling files. Every time the file exceeds a certain size or a new hour starts, a backup
       is created and the file used for logging is truncated. -->
      <RollingFile name="OrbeonRollingFileAppender" filename="${logs}/orbeon-filter.log"
          filePattern="${logs}/orbeon-filter-%d{yyyy-MM-dd'T'HH:00:00}-%i.log.gz">
      <Policies>
          <SizeBasedTriggeringPolicy size="5 MB"/>
          <TimeBasedTriggeringPolicy />
      </Policies>
      <DefaultRolloverStrategy max="1000"/>
      <PatternLayout pattern="%d{ISO8601} %-5p %c{1} %x - %m%n" charset="UTF-8"/>
  </RollingFile>
  </Appenders>
  
  <Loggers>
  <!-- XForms engine activity, see https://doc.orbeon.com/configuration/advanced/xforms-logging.html -->
      <Logger name="org.orbeon.oxf.xforms.processor.XFormsServer" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>
      
      <Logger name="org.orbeon.oxf.webapp.ProcessorService" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

  <!-- To enable logging for any of the sub-systems below, copy that section outside of the comment block -->

      <Logger name="org.orbeon.filter.limiter" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.auth" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>
<!--
  <Logger name="org.orbeon.fr.data-migration" level="debug"/>

  <Logger name="org.orbeon.xforms.analysis.calculate" level="debug"/>
-->
      <Logger name="org.orbeon.lifecycle" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.xbl" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>
<!--
  <Logger name="org.orbeon.properties" level="debug"/>

  <Logger name="org.orbeon.oxf.processor.pipeline.TeeProcessor" level="debug"/>

  <Logger name="org.orbeon.oxf.processor.pipeline.choose.ConcreteChooseProcessor" level="debug"/>
-->
      <Logger name="org.orbeon.oxf.processor.generator.URLGenerator" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>
<!--
  <Logger name="org.orbeon.oxf.processor.sql.SQLProcessor" level="debug"/>
-->
      <Logger name="org.orbeon.oxf.controller.PageFlowControllerProcessor" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.oxf.processor.generator.RequestGenerator" level="debug">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.oxf.webapp.OrbeonSessionListener" level="info">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.oxf.webapp.OrbeonServletContextListener" level="info">
          <AppenderRef ref="OrbeonRollingFileAppender"/>
      </Logger>

      <Logger name="org.orbeon.init" level="info">
          <AppenderRef ref="STDOUT"/>
      </Logger>

  <!-- You decide here which one of the loggers listed above you want to use. -->
  <Root level="info">
      <AppenderRef ref="STDOUT"/>
      <!--<AppenderRef ref="OrbeonSingleFileAppender"/>-->
  </Root>
  </Loggers>

</Configuration>